function q = q_avg(Q)

[ligne,colone]=size(Q);

avg1  = (Q(1,2) + Q(2,1))/2;
avg2  = (Q(1,3) + Q(2,2) + Q(3,1))/3;
avg3  = (Q(1,4) + Q(2,3) + Q(3,2) + Q(4,1))/4;
avg4  = (Q(1,5) + Q(2,4) + Q(3,3) + Q(4,2)+ Q(5,1))/5;
avg5  = (Q(1,6)+ Q(2,5) + Q(3,4) + Q(4,3) + Q(5,2)+ Q(6,1))/6;
avg6  = (Q(1,7)+ Q(2,6) + Q(3,5) + Q(4,4) + Q(5,3)+ Q(6,2) + Q(7,1)) / 7;
avg7  = (Q(1,8)+ Q(2,7) + Q(3,6) + Q(4,5) + Q(5,4)+ Q(6,3)+ Q(7,2)+ Q(8,1))/8;
avg8  = (Q(2,8)+ Q(3,7) + Q(4,6) + Q(5,5) + Q(6,4)+ Q(7,3) + Q(8,2)) / 7;
avg9  = (Q(3,8)+ Q(4,7) + Q(5,6) + Q(6,5) + Q(7,4)+ Q(8,3))/6;
avg10 = (Q(4,8) + Q(4,7) + Q(5,5) + Q(7,4)+ Q(8,4))/5;
avg11 = (Q(5,8) + Q(6,4) + Q(4,6) + Q(8,5))/4;
avg12 = (Q(6,8) + Q(7,7) + Q(8,6))/3;
avg13 = (Q(7,8) + Q(8,7))/2;

q =  (avg2-avg1) + (avg3-avg2) + (avg4-avg3) + (avg5-avg4) + (avg6-avg5) + (avg7-avg6) + (avg8-avg7) + (avg9-avg8)+ (avg10-avg9)+ (avg11-avg10)+ (avg12-avg11)+ (avg13-avg12);


q = round(q/12); 